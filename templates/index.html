<!DOCTYPE html>
<html>
  <head>
  <style>
      /* Always set the map height explicitly to define the size of the div
       * element that contains the map. */
      #map {
        height: 100%;
      }
      /* Optional: Makes the sample page fill the window. */
      html, body {
        height: 100%;
        margin: 0;
        padding: 0;
      }
    </style>
  </head>
  <body>
    <h3>Tweet Map Updated</h3>

      <form name="select-keyword" action="/" method="post" >
         <label for="selkey">Select Keyword:</label>
         <select name="keyword" class="form-control" id="selkey" onchange="submitForm(this)">
          <option value="">Select Keyword</option>
          <option value="keyword 1">movies</option>
          <option value="keyword 2">technology</option>
          <option value="keyword 3">sports</option>
          <option value="keyword 4">soccer</option>
          <option value="keyword 5">news</option>
          <option value="keyword 6">engineering</option>
          <option value="keyword 7">twitter</option>
          <option value="keyword 8">google</option>
          <option value="keyword 9">facebook</option>
          <option value="keyword 10">amazon</option>
         </select>
      <input type="submit" value="update map" />
      </form>

      <h3>{{key| safe}}</h3>

    <p id="demo"></p>
    <p id="demo2"></p>

    <div id="map"></div>

    <script>

      function initMap() {


        var tweets2 = {{tweets| safe}};
        var size=0;
        size = tweets2.length;
        document.getElementById("demo").innerHTML = size;

          var latitude = [];
          var longitude = [];

          for(var i = 0; i < size; i++) {

            latitude[i] = tweets2[i]["_source"]["coordinates"][0];
            longitude[i] = tweets2[i]["_source"]["coordinates"][1];
          }

        var uluru = {lat: 0.00, lng: 0.00};
        var markers;

        var map = new google.maps.Map(document.getElementById('map'), {
          zoom: 3,
          center: uluru
        });

          var text = "";

          for(var i = 0; i < size; i++) {

              markers = new google.maps.Marker({
              position: {lat:latitude[i] , lng: longitude[i]},
              map: map
        });
              text += " " + latitude[i] + " , " + longitude[i] + "<br>";
      }
            document.getElementById("demo2").innerHTML = text;

    }

    </script>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyD7tUD_Ag0pmg8NAeIv6WyH0K7pPspiBaE&callback=initMap" async defer>
    </script>
  </body>
</html>